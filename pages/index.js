import Head from 'next/head'
import Callout from '../components/Callout'
import Main from '../components/Main'
import Header from '../components/Header'
import SmallReview from '../components/SmallReview'
import styles from '../styles/components/Home.module.scss'
import prisma from '../lib/prisma'

export async function getServerSideProps() {
  const result = await prisma.public_Bathrooms.findMany()
  const data = JSON.stringify(result)
  return { props: { data } }
}

export default function Blog({ data }) {
  const reviews = JSON.parse(data);

  return (
    <>
      <Head>
        <title>Toilet UMD</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <Header />

      <Main>
        <div className={styles.indent}>
          <h1 className={styles.welcome}>Welcome!</h1>
          <p className={styles.welcome_para}>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Unde quisquam ratione nam dolores dolore ad accusamus consequatur qui dolorum debitis numquam magnam harum natus ducimus cupiditate repellat in aut animi, quas enim alias pariatur quaerat minima tenetur? Qui, nemo eligendi.
          </p>
          <Callout>
            <h3>Current Top Bathrooms</h3>
            {
              reviews.map((bathroom) => (
                <SmallReview key={bathroom.id} review={bathroom}/>
              ))
            }
          </Callout>
        </div>
      </Main>
    </>
  )
}